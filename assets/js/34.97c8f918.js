(window.webpackJsonp=window.webpackJsonp||[]).push([[34],{350:function(s,e,t){"use strict";t.r(e);var a=t(7),v=Object(a.a)({},(function(){var s=this,e=s._self._c;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("blockquote",[e("p",[s._v("要学习 Vite，必须要了解 Vite 的特性，即 Vite 提供的功能支持，了解 Vite 在整个构建流程做的事")])]),s._v(" "),e("h2",{attrs:{id:"一、vite-的特性"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#一、vite-的特性"}},[s._v("#")]),s._v(" 一、Vite 的特性")]),s._v(" "),e("p",[s._v("下面是 Vite 帮我们做的一些工作：")]),s._v(" "),e("h3",{attrs:{id:"_1-npm-依赖解析和预构建"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-npm-依赖解析和预构建"}},[s._v("#")]),s._v(" 1. npm 依赖解析和预构建")]),s._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",[e("code",[s._v("- 预构建 它们可以提高页面加载速度，并将 `CommonJS / UMD` 转换为 `ESM` 格式。预构建这一步由 `esbuild` 执行，这使得 `Vite` 的冷启动时间比任何基于 `JavaScript` 的打包器都要快得多。\n- 重写导入为合法的 `URL`，例如 `/node_modules/.vite/deps/my-dep.js?v=f3sf2ebd` 以便浏览器能够正确导入它们。\n")])])]),e("blockquote",[e("p",[s._v("依赖是强缓存的")])]),s._v(" "),e("h3",{attrs:{id:"_2-模块热替换"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-模块热替换"}},[s._v("#")]),s._v(" 2. 模块热替换")]),s._v(" "),e("p",[e("code",[s._v("Vite")]),s._v(" 提供了一套原生 "),e("code",[s._v("ESM")]),s._v(" 的 "),e("code",[s._v("HMR API")]),s._v("。 具有 "),e("code",[s._v("HMR")]),s._v(" 功能的框架可以利用该 "),e("code",[s._v("API")]),s._v(" 提供即时、准确的更新，而无需重新加载页面或清除应用程序状态。"),e("code",[s._v("Vite")]),s._v(" 内置了 "),e("code",[s._v("HMR")]),s._v(" 到 "),e("code",[s._v("Vue")]),s._v("单文件组件（SFC） 和 "),e("code",[s._v("React Fast Refresh")]),s._v(" 中。也通过 "),e("code",[s._v("@prefresh/vite")]),s._v(" 对 "),e("code",[s._v("Preact")]),s._v(" 实现了官方集成。")]),s._v(" "),e("blockquote",[e("p",[s._v("注意，你不需要手动设置这些 —— 当你通过 "),e("code",[s._v("create-vite")]),s._v(" 创建应用程序时，所选模板已经为你预先配置了这些。")])]),s._v(" "),e("h3",{attrs:{id:"_3-typescript"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-typescript"}},[s._v("#")]),s._v(" 3. TypeScript")]),s._v(" "),e("p",[e("code",[s._v("Vite")]),s._v("使用"),e("code",[s._v("esbuild")]),s._v("将"),e("code",[s._v("TypeScript")]),s._v("转义到"),e("code",[s._v("JavaScript")])]),s._v(" "),e("p",[e("code",[s._v("Vite")]),s._v("仅执行转义，不进行类型检查，假定类型检查已经被 IDE 或构建过程处理了。"),e("code",[s._v("Vite")]),s._v("的工作中心是将源模块转化为可以在浏览器中运行的格式，类型检查与代码转换功能进行了分割。")]),s._v(" "),e("p",[s._v("TypeScript 编译器选项:")]),s._v(" "),e("ul",[e("li",[e("p",[e("a",{attrs:{href:"https://cn.vitejs.dev/guide/features.html#isolatedmodules",target:"_blank",rel:"noopener noreferrer"}},[s._v("isolatedModules"),e("OutboundLink")],1)]),s._v(" "),e("p",[e("code",[s._v("esbuild")]),s._v("只进行转义，不需要类型信息，并不支持某些特性，如"),e("code",[s._v("const enum")]),s._v("和隐式类导入")])]),s._v(" "),e("li",[e("p",[e("a",{attrs:{href:"https://cn.vitejs.dev/guide/features.html#usedefineforclassfields",target:"_blank",rel:"noopener noreferrer"}},[s._v("useDefineForClassFields"),e("OutboundLink")],1)]),s._v(" "),e("p",[s._v("从"),e("code",[s._v("Vite v2.5.0")]),s._v("开始，此选项默认为"),e("code",[s._v("true")])])])]),s._v(" "),e("h3",{attrs:{id:"_4-vue-jsx-tsx"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_4-vue-jsx-tsx"}},[s._v("#")]),s._v(" 4. Vue/JSX/TSX")]),s._v(" "),e("p",[e("code",[s._v(".jsx")]),s._v(" 和"),e("code",[s._v(".tsx")]),s._v("文件开箱即用，"),e("code",[s._v("JSX")]),s._v(" 的转义同样通过 "),e("code",[s._v("esbuild")])]),s._v(" "),e("h3",{attrs:{id:"_5-css"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_5-css"}},[s._v("#")]),s._v(" 5. CSS")]),s._v(" "),e("p",[s._v("导入 "),e("code",[s._v(".css")]),s._v(" 文件将会把内容插入到 "),e("code",[s._v("<style>")]),s._v(" 标签中，同时也带有 "),e("code",[s._v("HMR")]),s._v(" 支持。也能够以字符串的形式检索处理后的、作为其模块默认导出的 "),e("code",[s._v("CSS")]),s._v("。")]),s._v(" "),e("ul",[e("li",[e("p",[s._v("@import 内联和变基\n"),e("code",[s._v("Vite")]),s._v("内置了"),e("code",[s._v("postcss-import")]),s._v("，在"),e("code",[s._v("css")]),s._v("、"),e("code",[s._v("sass")]),s._v("、"),e("code",[s._v("less")]),s._v("文件中可以使用"),e("code",[s._v("@import")]),s._v("别名和"),e("code",[s._v("URL")]),s._v("变基，具体可以参考"),e("a",{attrs:{href:"https://cn.vitejs.dev/guide/features.html#css-pre-processors",target:"_blank",rel:"noopener noreferrer"}},[s._v("CSS Pre-processors"),e("OutboundLink")],1)])]),s._v(" "),e("li",[e("p",[s._v("PostCSS")]),s._v(" "),e("p",[e("code",[s._v("PostCSS")]),s._v("的配置会自动应用到导入了的"),e("code",[s._v("CSS")]),s._v("上")]),s._v(" "),e("p",[s._v("注意："),e("code",[s._v("CSS")]),s._v("最小化压缩会在 "),e("code",[s._v("PostCSS")]),s._v("之后运行，使用"),e("code",[s._v("build.cssTarget")]),s._v("选项。")]),s._v(" "),e("blockquote",[e("p",[s._v("autoprefixer 插件也是默认集成")])])]),s._v(" "),e("li",[e("p",[s._v("CSS Modules")]),s._v(" "),e("p",[e("code",[s._v("CSS module")]),s._v("是 CSS 模块化的概念，文件名以"),e("code",[s._v(".module.css")]),s._v("结尾，文件里面的类名和动画名会默认的进行隔离，与"),e("code",[s._v("Vue")]),s._v("SFC 的"),e("code",[s._v("<style scoped>")]),s._v("原理不同。")]),s._v(" "),e("p",[e("code",[s._v("CSS modules")]),s._v("行为可以通过"),e("code",[s._v("css.modules")]),s._v("选项进行配置。")])]),s._v(" "),e("li",[e("p",[s._v("CSS 预处理器")]),s._v(" "),e("p",[e("code",[s._v("Vite")]),s._v("内置支持"),e("code",[s._v(".scss")]),s._v("、"),e("code",[s._v(".sass")]),s._v("、"),e("code",[s._v(".less")]),s._v("、"),e("code",[s._v(".styl")]),s._v("和"),e("code",[s._v(".stylus")]),s._v("，不需要为他们安装特性的"),e("code",[s._v("Vite")]),s._v("插件，但必须安装预处理器的依赖")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("yarn")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-D")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("less")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])])]),s._v(" "),e("li",[e("p",[s._v("禁用 CSS 注入页面")]),s._v(" "),e("p",[s._v("这个感觉用得比较少")]),s._v(" "),e("div",{staticClass:"language-js line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'./foo.css'")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 样式将会注入页面")]),s._v("\n\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" otherStyles "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'./bar.css?inline'")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 样式不会注入页面")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])])])]),s._v(" "),e("h3",{attrs:{id:"_6-静态资源处理"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_6-静态资源处理"}},[s._v("#")]),s._v(" 6. 静态资源处理")]),s._v(" "),e("p",[s._v("导入一个静态资源会返回解析后的 URL：")]),s._v(" "),e("div",{staticClass:"language-js line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" imgUrl "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'./img.png'")]),s._v("\ndocument"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("getElementById")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'hero-img'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("src "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" imgUrl\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("p",[s._v("添加一些特殊的查询参数可以更改资源被引入的方式，细节可以查看"),e("a",{attrs:{href:"https://cn.vitejs.dev/guide/assets.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("静态资源处理"),e("OutboundLink")],1)]),s._v(" "),e("h3",{attrs:{id:"_7-json-导入"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_7-json-导入"}},[s._v("#")]),s._v(" 7. JSON 导入")]),s._v(" "),e("p",[s._v("JSON 可以被直接导入 —— 同样支持具名导入：")]),s._v(" "),e("div",{staticClass:"language-js line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 导入整个对象")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" json "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'./example.json'")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 对一个根字段使用具名导入 —— 有效帮助 treeshaking！")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" field "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'./example.json'")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br")])]),e("h3",{attrs:{id:"_8-glob-导入"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_8-glob-导入"}},[s._v("#")]),s._v(" 8. Glob 导入")]),s._v(" "),e("p",[s._v("Vite 支持使用特殊的 import.meta.glob 函数从文件系统导入多个模块：")]),s._v(" "),e("div",{staticClass:"language-js line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" modules "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("meta"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("glob")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'./dir/*.js'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("h3",{attrs:{id:"_9-动态导入"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_9-动态导入"}},[s._v("#")]),s._v(" 9. 动态导入")]),s._v(" "),e("p",[s._v("和 glob 导入 类似，Vite 也支持带变量的动态导入。")]),s._v(" "),e("h3",{attrs:{id:"_10-webassembly"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_10-webassembly"}},[s._v("#")]),s._v(" 10. WebAssembly")]),s._v(" "),e("p",[s._v("WebAssembly（简称 wasm），是一种新的字节码格式，目前，主流浏览器都已经支持 wasm。与 JavaScript 需要解释执行不同的是，wasm 字节码和底层机器码很相似可快速装载运行，因此性能相对于 JavaScript 解释执行有了很大的提升。")]),s._v(" "),e("p",[s._v("与传统的文本文件格式相比，WebAssembly 模块可以更快地加载、解析和执行，并且提供更好的跨平台兼容性。同时，WebAssembly 还可以让开发人员使用更底层、更强大的编程语言来编写 Web 应用程序，从而实现更高的性能和安全性。")]),s._v(" "),e("p",[s._v("WebAssembly 应用场景：游戏开发、数据密集型应用程序、桌面应用程序的 web 化。")]),s._v(" "),e("h3",{attrs:{id:"_11-web-workers"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_11-web-workers"}},[s._v("#")]),s._v(" 11. Web Workers")]),s._v(" "),e("p",[s._v("应用场景有：数学运算、图像处理、大数据处理")]),s._v(" "),e("h3",{attrs:{id:"_12-构建优化"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_12-构建优化"}},[s._v("#")]),s._v(" 12. 构建优化")]),s._v(" "),e("ol",[e("li",[e("p",[s._v("CSS 代码分割")])]),s._v(" "),e("li",[e("p",[s._v("预加载指令生成")])]),s._v(" "),e("li",[e("p",[s._v("异步 Chunk 加载优化")])])]),s._v(" "),e("h2",{attrs:{id:"二、使用-vite-构建-vue-项目"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#二、使用-vite-构建-vue-项目"}},[s._v("#")]),s._v(" 二、使用 Vite 构建 Vue 项目")])])}),[],!1,null,null,null);e.default=v.exports}}]);